✅ Pipe-delimited file saved to: /home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/batch_files_directory/FLU_Vaccinations_v5_8HK48_20260210T16015500.csv
Batch file created: FLU_Vaccinations_v5_8HK48_20260210T16015500.csv
Upload successful: FLU_Vaccinations_v5_8HK48_20260210T16015500.csv → immunisation-batch-internal-qa-data-sources
Batch file uploaded to S3: FLU_Vaccinations_v5_8HK48_20260210T16015500.csv
Waiting for file in archive: s3://immunisation-batch-internal-qa-data-sources/archive/FLU_Vaccinations_v5_8HK48_20260210T16015500.csv
Still waiting... (0s)
Still waiting... (5s)
Still waiting... (10s)
Still waiting... (15s)
Still waiting... (20s)
Still waiting... (25s)
Still waiting... (30s)
Still waiting... (35s)
Still waiting... (40s)
File found in archive: archive/FLU_Vaccinations_v5_8HK48_20260210T16015500.csv
Waiting for ACK files starting with 'ack/FLU_Vaccinations_v5_8HK48_20260210T16015500' in bucket: immunisation-batch-internal-qa-data-destinations
[MODE] Expecting ONLY CSV ACK file
[FOUND] .csv file located: ack/FLU_Vaccinations_v5_8HK48_20260210T16015500_InfAck_20260210T16015600.csv
[SUCCESS] Loaded .csv file (350 bytes)
[COMPLETE] All expected ACK files received
Waiting for ACK files starting with 'forwardedFile/FLU_Vaccinations_v5_8HK48_20260210T16015500' in bucket: immunisation-batch-internal-qa-data-destinations
[MODE] Expecting BOTH CSV and JSON ACK files
[WAIT] No files found yet... (0s)
[WAIT] No files found yet... (5s)
[TIMEOUT] ACK files not found with prefix 'forwardedFile/FLU_Vaccinations_v5_8HK48_20260210T16015500' after 10 seconds
Attempt 1: Found 1 items

Found Audit detail for filename=FLU_Vaccinations_v5_8HK48_20260210T16015500.csv

✅ Updated audit status for message_id=4a803be7-8204-4c67-b0d7-1663ac8eaa63: {'status': 'Not processed - Automation testing'}
 No IMMS_ID column or no values present as test failed due to as exception — skipping delete cleanup.
