{"uid":"d56f792c627370ae","name":"Flu event is created and updated twice","fullName":"features.APITests.steps.test_update_steps#test_flu_event_is_created_and_updated_twice","historyId":"9b226546afc5591000d3682592696bdd","time":{"start":1769707191870,"stop":1769707196502,"duration":4632},"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/update.feature: Flu event is created and updated twice","descriptionHtml":"<p>/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/update.feature: Flu event is created and updated twice</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1769707068678,"stop":1769707068679,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1769707068681,"stop":1769707072629,"duration":3948},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_apigee_apps","time":{"start":1769707072629,"stop":1769707081694,"duration":9065},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1769707191870,"stop":1769707193010,"duration":1140},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1769707191870,"stop":1769707191870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/update.feature: Flu event is created and updated twice","status":"passed","steps":[],"attachments":[{"uid":"ef09b294117e4b79","name":"Step Passed: I have created a valid vaccination record","source":"ef09b294117e4b79.txt","type":"text/plain","size":60},{"uid":"c58be927b1ef8b1e","name":"Step Passed: I update the address of the original immunization event","source":"c58be927b1ef8b1e.txt","type":"text/plain","size":74},{"uid":"7b452738bf5e7933","name":"Step Passed: The request will be successful with the status code '200'","source":"7b452738bf5e7933.txt","type":"text/plain","size":76},{"uid":"c98c8b76c8dc14dc","name":"Step Passed: The Etag in header will containing the latest event version","source":"c98c8b76c8dc14dc.txt","type":"text/plain","size":78},{"uid":"d845b9c45b2e3dcd","name":"Step Passed: The imms event table will be populated with the correct data for 'updated' event","source":"d845b9c45b2e3dcd.txt","type":"text/plain","size":99},{"uid":"f9f87fbe56149c6b","name":"Step Passed: The delta table will be populated with the correct data for updated event","source":"f9f87fbe56149c6b.txt","type":"text/plain","size":92},{"uid":"dd585477a444d622","name":"Step Passed: I subsequently update the vaccination details of the original immunization event","source":"dd585477a444d622.txt","type":"text/plain","size":99},{"uid":"dcba7d181835b5b4","name":"Step Passed: The request will be successful with the status code '200'","source":"dcba7d181835b5b4.txt","type":"text/plain","size":76},{"uid":"11f454836708e0cb","name":"Step Passed: The Etag in header will containing the latest event version","source":"11f454836708e0cb.txt","type":"text/plain","size":78},{"uid":"4f668ae6bb35acf1","name":"Step Passed: The imms event table will be populated with the correct data for 'updated' event","source":"4f668ae6bb35acf1.txt","type":"text/plain","size":99},{"uid":"f6c90def55b7ad24","name":"Step Passed: The delta table will be populated with the correct data for updated event","source":"f6c90def55b7ad24.txt","type":"text/plain","size":92},{"uid":"57f974742c9ee84d","name":"stdout","source":"57f974742c9ee84d.txt","type":"text/plain","size":22220}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":12,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_apigee_apps::0","time":{"start":1769707405261,"stop":1769707417896,"duration":12635},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Update the immunization of a patient"},{"name":"feature","value":"Update the immunization of a patient"},{"name":"tag","value":"Delete_cleanUp"},{"name":"tag","value":"supplier_name_Postman_Auth"},{"name":"tag","value":"functional"},{"name":"tag","value":"smoke"},{"name":"tag","value":"Update_Feature"},{"name":"tag","value":"patient_id_Random"},{"name":"tag","value":"vaccine_type_FLU"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2925-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_update_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":2,"broken":2,"skipped":0,"passed":53,"unknown":0,"total":57},"items":[{"uid":"43f0c65c7f7d62b5","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1205/#testresult/43f0c65c7f7d62b5","status":"passed","time":{"start":1769705564295,"stop":1769705569464,"duration":5169}},{"uid":"dde220bca06d7e8e","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/173/#testresult/dde220bca06d7e8e","status":"passed","time":{"start":1769704102784,"stop":1769704108882,"duration":6098}},{"uid":"93f8dd4694ebe10d","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/173/#testresult/93f8dd4694ebe10d","status":"passed","time":{"start":1769703415558,"stop":1769703419937,"duration":4379}},{"uid":"2a90edf3c202d8b5","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1203/#testresult/2a90edf3c202d8b5","status":"broken","statusDetails":"requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps","time":{"start":1769703426988,"stop":1769703426989,"duration":1}},{"uid":"80448c13cdeebf4e","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1202/#testresult/80448c13cdeebf4e","status":"passed","time":{"start":1769688933934,"stop":1769688938441,"duration":4507}},{"uid":"53bb84a81778a040","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/53bb84a81778a040","status":"passed","time":{"start":1769686222649,"stop":1769686227682,"duration":5033}},{"uid":"967f2712c678ec66","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/967f2712c678ec66","status":"passed","time":{"start":1769685621738,"stop":1769685626278,"duration":4540}},{"uid":"be4c47f00e26a46d","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/be4c47f00e26a46d","status":"passed","time":{"start":1769684296188,"stop":1769684300707,"duration":4519}},{"uid":"41162ee98d2bd5bb","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1198/#testresult/41162ee98d2bd5bb","status":"passed","time":{"start":1769615395133,"stop":1769615401410,"duration":6277}},{"uid":"82e9c56d6b798387","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1197/#testresult/82e9c56d6b798387","status":"passed","time":{"start":1769615130115,"stop":1769615134030,"duration":3915}},{"uid":"aa68ac92ad0b86ed","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1195/#testresult/aa68ac92ad0b86ed","status":"passed","time":{"start":1769614582597,"stop":1769614586067,"duration":3470}},{"uid":"b0e5350158130135","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1196/#testresult/b0e5350158130135","status":"passed","time":{"start":1769614479119,"stop":1769614483996,"duration":4877}},{"uid":"de00489042843d3e","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1194/#testresult/de00489042843d3e","status":"passed","time":{"start":1769614409666,"stop":1769614413419,"duration":3753}},{"uid":"2c0241e54d9a8406","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1192/#testresult/2c0241e54d9a8406","status":"passed","time":{"start":1769614331066,"stop":1769614335153,"duration":4087}},{"uid":"3942f58832ad6bc","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1193/#testresult/3942f58832ad6bc","status":"passed","time":{"start":1769613716507,"stop":1769613723147,"duration":6640}},{"uid":"7145963955a67ae1","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/171/#testresult/7145963955a67ae1","status":"passed","time":{"start":1769602935561,"stop":1769602940145,"duration":4584}},{"uid":"2730223aeac6a500","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/171/#testresult/2730223aeac6a500","status":"passed","time":{"start":1769602306519,"stop":1769602310469,"duration":3950}},{"uid":"4689e11e53a216c","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/4689e11e53a216c","status":"passed","time":{"start":1769601667997,"stop":1769601672748,"duration":4751}},{"uid":"71b3297529a0b690","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1189/#testresult/71b3297529a0b690","status":"passed","time":{"start":1769601628264,"stop":1769601632190,"duration":3926}},{"uid":"4877a5817b1d2bb6","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/4877a5817b1d2bb6","status":"failed","statusDetails":"AssertionError: FAILURE: check bool(False): Update ImmsID 48eebc72-4a50-45a8-821f-ce604aa47311 with Version 3 - Expected SITE_OF_VACCINATION_TERM: Left upper arm structure (body structure), Actual Right upper arm structure (body structure)\nfeatures/APITests/steps/test_update_steps.py:40 in validate_delta_table_for_updated_event() -> validate_imms_delta_record_with_created_event(\nsrc/dynamoDB/dynamo_db_helper.py:217 in validate_imms_delta_record_with_created_event() -> check.is_true(\n\nFAILURE: check bool(False): Update ImmsID 48eebc72-4a50-45a8-821f-ce604aa47311 with Version 3 - Expected SITE_OF_VACCINATION_CODE: 368208006, Actual 368209003\nFAILURE: check bool(False): Update ImmsID 48eebc72-4a50-45a8-821f-ce604aa47311 with Version 3 - Expected ROUTE_OF_VACCINATION_TERM: Intramuscular route (qualifier value), Actual Subcutaneous route (qualifier value)\nFAILURE: check bool(False): Update ImmsID 48eebc72-4a50-45a8-821f-ce604aa47311 with Version 3 - Expected ROUTE_OF_VACCINATION_CODE: 78421000, Actual 34206005\n------------------------------------------------------------\nFailed Checks: 4","time":{"start":1769601148346,"stop":1769601151871,"duration":3525}}]},"tags":["vaccine_type_FLU","functional","Update_Feature","smoke","patient_id_Random","supplier_name_Postman_Auth","Delete_cleanUp"]},"source":"d56f792c627370ae.json","parameterValues":[]}