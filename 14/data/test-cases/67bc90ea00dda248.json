{"uid":"67bc90ea00dda248","name":"Verify that the POST Create API for different vaccine types","fullName":"features.APITests.steps.test_create_steps#test_verify_that_the_post_create_api_for_different_vaccine_types","historyId":"2912121a9de0a030fd6eae0b4503181f","time":{"start":1769187190744,"stop":1769187191121,"duration":377},"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/create.feature: Verify that the POST Create API for different vaccine types","descriptionHtml":"<p>/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/create.feature: Verify that the POST Create API for different vaccine types</p>\n","status":"failed","statusMessage":"AssertionError: \n          {\n            \"error\": \"invalid_request\",\n            \"error_description\": \"client_id is invalid\",\n            \"message_id\": \"rrt-2785480143593613550-b-geu2-2690164-19290655-1\"\n          }","statusTrace":"fixturefunc = <function valid_token_is_generated at 0x7fc397b64180>\nrequest = <FixtureRequest for <Function test_verify_that_the_post_create_api_for_different_vaccine_types[Random-PNEUMOCOCCAL-EMIS]>>\nkwargs = {'Supplier': 'EMIS', 'context': <utilities.context.ScenarioContext object at 0x7fc3848ca410>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nfeatures/APITests/steps/common_steps.py:35: in valid_token_is_generated\n    get_tokens(context, Supplier)\nutilities/api_gen_token.py:86: in get_tokens\n    context.token = get_access_token(context)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7fc3848ca410>\n\n    def get_access_token(context):\n        login_session = requests.session()\n        client_id = context.auth_client_Id\n        client_secret = context.auth_client_Secret\n        callback_url = context.callback_url\n        username = context.username\n        auth_url = context.auth_url\n        token_url = context.token_url\n        scope = context.scope\n    \n        # Login Page\n        authorize_resp = login_session.get(\n            auth_url,\n            params={\n                \"client_id\": client_id,\n                \"redirect_uri\": callback_url,\n                \"response_type\": \"code\",\n                \"scope\": scope,\n                \"state\": str(uuid.uuid4()),\n            },\n        )\n>       assert authorize_resp.status_code == 200, authorize_resp.text\nE       AssertionError: \nE                 {\nE                   \"error\": \"invalid_request\",\nE                   \"error_description\": \"client_id is invalid\",\nE                   \"message_id\": \"rrt-2785480143593613550-b-geu2-2690164-19290655-1\"\nE                 }\n\nutilities/api_gen_token.py:39: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1769187167314,"stop":1769187167315,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1769187167318,"stop":1769187169878,"duration":2560},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"temp_apigee_apps","time":{"start":1769187169878,"stop":1769187169878,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1769187190745,"stop":1769187190745,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1769187234381,"stop":1769187234381,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/create.feature: Verify that the POST Create API for different vaccine types","status":"failed","statusMessage":"AssertionError: \n          {\n            \"error\": \"invalid_request\",\n            \"error_description\": \"client_id is invalid\",\n            \"message_id\": \"rrt-2785480143593613550-b-geu2-2690164-19290655-1\"\n          }","statusTrace":"fixturefunc = <function valid_token_is_generated at 0x7fc397b64180>\nrequest = <FixtureRequest for <Function test_verify_that_the_post_create_api_for_different_vaccine_types[Random-PNEUMOCOCCAL-EMIS]>>\nkwargs = {'Supplier': 'EMIS', 'context': <utilities.context.ScenarioContext object at 0x7fc3848ca410>}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:898: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nfeatures/APITests/steps/common_steps.py:35: in valid_token_is_generated\n    get_tokens(context, Supplier)\nutilities/api_gen_token.py:86: in get_tokens\n    context.token = get_access_token(context)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <utilities.context.ScenarioContext object at 0x7fc3848ca410>\n\n    def get_access_token(context):\n        login_session = requests.session()\n        client_id = context.auth_client_Id\n        client_secret = context.auth_client_Secret\n        callback_url = context.callback_url\n        username = context.username\n        auth_url = context.auth_url\n        token_url = context.token_url\n        scope = context.scope\n    \n        # Login Page\n        authorize_resp = login_session.get(\n            auth_url,\n            params={\n                \"client_id\": client_id,\n                \"redirect_uri\": callback_url,\n                \"response_type\": \"code\",\n                \"scope\": scope,\n                \"state\": str(uuid.uuid4()),\n            },\n        )\n>       assert authorize_resp.status_code == 200, authorize_resp.text\nE       AssertionError: \nE                 {\nE                   \"error\": \"invalid_request\",\nE                   \"error_description\": \"client_id is invalid\",\nE                   \"message_id\": \"rrt-2785480143593613550-b-geu2-2690164-19290655-1\"\nE                 }\n\nutilities/api_gen_token.py:39: AssertionError","steps":[],"attachments":[{"uid":"b6ff0315635bdf1d","name":"Step Failed: Valid token is generated for the 'EMIS'","source":"b6ff0315635bdf1d.txt","type":"text/plain","size":278},{"uid":"50394731ed1717ea","name":"stdout","source":"50394731ed1717ea.txt","type":"text/plain","size":32}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_apigee_apps::0","time":{"start":1769187749860,"stop":1769187749860,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Create the immunization event for a patient"},{"name":"feature","value":"Create the immunization event for a patient"},{"name":"tag","value":"functional"},{"name":"tag","value":"smoke"},{"name":"tag","value":"Create_Feature"},{"name":"tag","value":"Delete_cleanUp"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervmymu0l"},{"name":"thread","value":"2762-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_create_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"_pytest_bdd_example","value":"{'Patient': 'Random', 'vaccine_type': 'PNEUMOCOCCAL', 'Supplier': 'EMIS'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["functional","Create_Feature","smoke","Delete_cleanUp"]},"source":"67bc90ea00dda248.json","parameterValues":["{'Patient': 'Random', 'vaccine_type': 'PNEUMOCOCCAL', 'Supplier': 'EMIS'}"]}