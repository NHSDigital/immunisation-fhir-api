{"uid":"31a0d7f2a0116498","name":"Verify that the POST Create API for different vaccine types","fullName":"features.APITests.steps.test_create_steps#test_verify_that_the_post_create_api_for_different_vaccine_types","historyId":"ddc0b00729522494200bf0be01a4c8f2","time":{"start":1769703407131,"stop":1769703422664,"duration":15533},"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/create.feature: Verify that the POST Create API for different vaccine types","descriptionHtml":"<p>/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/create.feature: Verify that the POST Create API for different vaccine types</p>\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps","statusTrace":"self = <HookCaller 'pytest_bdd_after_scenario'>\nkwargs = {'feature': Feature(scenarios=OrderedDict([('Verify that the POST Create API for different vaccine types', ScenarioTem...ble=None, failed=False, scenario=None, background=None)], description='', tags={'Delete_cleanUp', 'smoke'}, rule=None)}\nfirstresult = False\n\n    def __call__(self, **kwargs: object) -> Any:\n        \"\"\"Call the hook.\n    \n        Only accepts keyword arguments, which should match the hook\n        specification.\n    \n        Returns the result(s) of calling all registered plugins, see\n        :ref:`calling`.\n        \"\"\"\n        assert not self.is_historic(), (\n            \"Cannot directly call a historic hook - use call_historic instead.\"\n        )\n        self._verify_all_args_are_provided(kwargs)\n        firstresult = self.spec.opts.get(\"firstresult\", False) if self.spec else False\n        # Copy because plugins may register other plugins during iteration (#438).\n>       return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_hooks.py:512: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nfeatures/conftest.py:121: in pytest_bdd_after_scenario\n    context = request.getfixturevalue(\"context\")\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:532: in getfixturevalue\n    fixturedef = self._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1047: in execute\n    fixturedef = request._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1071: in execute\n    raise exc.with_traceback(exc_tb)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1140: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:891: in call_fixture_func\n    fixture_result = next(generator)\nfeatures/conftest.py:63: in temp_apigee_apps\n    created_apps = apigee_app_mgr.setup_apps_and_product()\nutilities/apigee/ApigeeOnDemandAppManager.py:100: in setup_apps_and_product\n    created_apps.append(self._create_app(product_name_uuid, supplier_name))\nutilities/apigee/ApigeeOnDemandAppManager.py:57: in _create_app\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [502]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/requests/models.py:1026: HTTPError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1769703407130,"stop":1769703407130,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1769703407133,"stop":1769703416501,"duration":9368},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1769703426470,"stop":1769703426470,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/APITests/create.feature: Verify that the POST Create API for different vaccine types","status":"broken","statusMessage":"requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps","statusTrace":"self = <HookCaller 'pytest_bdd_after_scenario'>\nkwargs = {'feature': Feature(scenarios=OrderedDict([('Verify that the POST Create API for different vaccine types', ScenarioTem...ble=None, failed=False, scenario=None, background=None)], description='', tags={'Delete_cleanUp', 'smoke'}, rule=None)}\nfirstresult = False\n\n    def __call__(self, **kwargs: object) -> Any:\n        \"\"\"Call the hook.\n    \n        Only accepts keyword arguments, which should match the hook\n        specification.\n    \n        Returns the result(s) of calling all registered plugins, see\n        :ref:`calling`.\n        \"\"\"\n        assert not self.is_historic(), (\n            \"Cannot directly call a historic hook - use call_historic instead.\"\n        )\n        self._verify_all_args_are_provided(kwargs)\n        firstresult = self.spec.opts.get(\"firstresult\", False) if self.spec else False\n        # Copy because plugins may register other plugins during iteration (#438).\n>       return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_hooks.py:512: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nfeatures/conftest.py:121: in pytest_bdd_after_scenario\n    context = request.getfixturevalue(\"context\")\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:532: in getfixturevalue\n    fixturedef = self._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1047: in execute\n    fixturedef = request._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1071: in execute\n    raise exc.with_traceback(exc_tb)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1140: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:891: in call_fixture_func\n    fixture_result = next(generator)\nfeatures/conftest.py:63: in temp_apigee_apps\n    created_apps = apigee_app_mgr.setup_apps_and_product()\nutilities/apigee/ApigeeOnDemandAppManager.py:100: in setup_apps_and_product\n    created_apps.append(self._create_app(product_name_uuid, supplier_name))\nutilities/apigee/ApigeeOnDemandAppManager.py:57: in _create_app\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [502]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/requests/models.py:1026: HTTPError","steps":[],"attachments":[{"uid":"4c8a9ecd71754a85","name":"Step Failed: Valid token is generated for the 'Postman_Auth'","source":"4c8a9ecd71754a85.txt","type":"text/plain","size":227},{"uid":"c70d0111ea04e46c","name":"log","source":"c70d0111ea04e46c.txt","type":"text/plain","size":93},{"uid":"6c111edf525321e4","name":"stdout","source":"6c111edf525321e4.txt","type":"text/plain","size":21}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Create the immunization event for a patient"},{"name":"feature","value":"Create the immunization event for a patient"},{"name":"tag","value":"Create_Feature"},{"name":"tag","value":"Delete_cleanUp"},{"name":"tag","value":"functional"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"features.APITests.steps"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2902-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.APITests.steps.test_create_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"_pytest_bdd_example","value":"{'Patient': 'Random', 'vaccine_type': 'COVID', 'Supplier': 'Postman_Auth'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":51,"unknown":0,"total":53},"items":[{"uid":"ddb79b3375b8ff3c","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1202/#testresult/ddb79b3375b8ff3c","status":"passed","time":{"start":1769688809363,"stop":1769688835342,"duration":25979}},{"uid":"4950bb7df8f7204e","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/4950bb7df8f7204e","status":"passed","time":{"start":1769686093333,"stop":1769686118267,"duration":24934}},{"uid":"280988a0c0eeba81","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/280988a0c0eeba81","status":"passed","time":{"start":1769685495008,"stop":1769685523671,"duration":28663}},{"uid":"a77d5069f5761152","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/a77d5069f5761152","status":"passed","time":{"start":1769684175416,"stop":1769684202162,"duration":26746}},{"uid":"5792da25e8745635","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1198/#testresult/5792da25e8745635","status":"passed","time":{"start":1769615240732,"stop":1769615262460,"duration":21728}},{"uid":"2bd149f6012fe21e","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1197/#testresult/2bd149f6012fe21e","status":"passed","time":{"start":1769615012261,"stop":1769615030665,"duration":18404}},{"uid":"22c3abded61ea44c","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1195/#testresult/22c3abded61ea44c","status":"passed","time":{"start":1769614452226,"stop":1769614480032,"duration":27806}},{"uid":"b2f56ac0391d13da","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1196/#testresult/b2f56ac0391d13da","status":"passed","time":{"start":1769614363877,"stop":1769614383568,"duration":19691}},{"uid":"a2bdd3f63536111","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1194/#testresult/a2bdd3f63536111","status":"passed","time":{"start":1769614298066,"stop":1769614311739,"duration":13673}},{"uid":"ca6e9f0616f6b15d","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1192/#testresult/ca6e9f0616f6b15d","status":"passed","time":{"start":1769614185690,"stop":1769614213174,"duration":27484}},{"uid":"8b60611cfa043291","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1193/#testresult/8b60611cfa043291","status":"passed","time":{"start":1769613576939,"stop":1769613605435,"duration":28496}},{"uid":"4983b5bc710dc794","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/171/#testresult/4983b5bc710dc794","status":"passed","time":{"start":1769602788862,"stop":1769602819388,"duration":30526}},{"uid":"a6a6f825038ad828","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/171/#testresult/a6a6f825038ad828","status":"passed","time":{"start":1769602180793,"stop":1769602205730,"duration":24937}},{"uid":"fdb47e0c0bd08af2","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/fdb47e0c0bd08af2","status":"passed","time":{"start":1769601529190,"stop":1769601549586,"duration":20396}},{"uid":"c7633e6688d0f017","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1189/#testresult/c7633e6688d0f017","status":"passed","time":{"start":1769601494488,"stop":1769601522931,"duration":28443}},{"uid":"56ce8a375cdc646a","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/56ce8a375cdc646a","status":"passed","time":{"start":1769601031426,"stop":1769601056777,"duration":25351}},{"uid":"b51565ddb8076d74","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/b51565ddb8076d74","status":"passed","time":{"start":1769600453103,"stop":1769600477088,"duration":23985}},{"uid":"952d889aa8b030c4","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1187/#testresult/952d889aa8b030c4","status":"passed","time":{"start":1769599799647,"stop":1769599815614,"duration":15967}},{"uid":"ef9500ff684e51de","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1188/#testresult/ef9500ff684e51de","status":"passed","time":{"start":1769599639303,"stop":1769599659736,"duration":20433}},{"uid":"6fb2c23fc66c2c36","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/169/#testresult/6fb2c23fc66c2c36","status":"passed","time":{"start":1769599513660,"stop":1769599539069,"duration":25409}}]},"tags":["functional","Create_Feature","smoke","Delete_cleanUp"]},"source":"31a0d7f2a0116498.json","parameterValues":["{'Patient': 'Random', 'vaccine_type': 'COVID', 'Supplier': 'Postman_Auth'}"]}