{"uid":"ba5afbd8e5fa0c58","name":"Verify that minimum dataset vaccination record will be created through batch file","fullName":"features.batchTests.Steps.test_create_batch_steps#test_verify_that_minimum_dataset_vaccination_record_will_be_created_through_batch_file","historyId":"a2ca749468eabcb18ccffad9519d20e5","time":{"start":1769703427201,"stop":1769703427202,"duration":1},"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/batchTests/create_batch.feature: Verify that minimum dataset vaccination record will be created through batch file","descriptionHtml":"<p>/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/batchTests/create_batch.feature: Verify that minimum dataset vaccination record will be created through batch file</p>\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps","statusTrace":"self = <HookCaller 'pytest_bdd_after_scenario'>\nkwargs = {'feature': Feature(scenarios=OrderedDict([('Verify that full dataset vaccination record will be created through batch...nd=None)], description='', tags={'delete_cleanup_batch', 'supplier_name_TPP', 'smoke', 'vaccine_type_MMR'}, rule=None)}\nfirstresult = False\n\n    def __call__(self, **kwargs: object) -> Any:\n        \"\"\"Call the hook.\n    \n        Only accepts keyword arguments, which should match the hook\n        specification.\n    \n        Returns the result(s) of calling all registered plugins, see\n        :ref:`calling`.\n        \"\"\"\n        assert not self.is_historic(), (\n            \"Cannot directly call a historic hook - use call_historic instead.\"\n        )\n        self._verify_all_args_are_provided(kwargs)\n        firstresult = self.spec.opts.get(\"firstresult\", False) if self.spec else False\n        # Copy because plugins may register other plugins during iteration (#438).\n>       return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_hooks.py:512: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nfeatures/conftest.py:121: in pytest_bdd_after_scenario\n    context = request.getfixturevalue(\"context\")\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:532: in getfixturevalue\n    fixturedef = self._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1047: in execute\n    fixturedef = request._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1071: in execute\n    raise exc.with_traceback(exc_tb)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1140: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:891: in call_fixture_func\n    fixture_result = next(generator)\nfeatures/conftest.py:63: in temp_apigee_apps\n    created_apps = apigee_app_mgr.setup_apps_and_product()\nutilities/apigee/ApigeeOnDemandAppManager.py:100: in setup_apps_and_product\n    created_apps.append(self._create_app(product_name_uuid, supplier_name))\nutilities/apigee/ApigeeOnDemandAppManager.py:57: in _create_app\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [502]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/requests/models.py:1026: HTTPError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_environment","time":{"start":1769703407130,"stop":1769703407130,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"global_context","time":{"start":1769703407133,"stop":1769703416501,"duration":9368},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pytest_bdd_example","time":{"start":1769703427201,"stop":1769703427201,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"/home/runner/work/immunisation-fhir-api/immunisation-fhir-api/tests/e2e_automation/features/batchTests/create_batch.feature: Verify that minimum dataset vaccination record will be created through batch file","status":"broken","statusMessage":"requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps","statusTrace":"self = <HookCaller 'pytest_bdd_after_scenario'>\nkwargs = {'feature': Feature(scenarios=OrderedDict([('Verify that full dataset vaccination record will be created through batch...nd=None)], description='', tags={'delete_cleanup_batch', 'supplier_name_TPP', 'smoke', 'vaccine_type_MMR'}, rule=None)}\nfirstresult = False\n\n    def __call__(self, **kwargs: object) -> Any:\n        \"\"\"Call the hook.\n    \n        Only accepts keyword arguments, which should match the hook\n        specification.\n    \n        Returns the result(s) of calling all registered plugins, see\n        :ref:`calling`.\n        \"\"\"\n        assert not self.is_historic(), (\n            \"Cannot directly call a historic hook - use call_historic instead.\"\n        )\n        self._verify_all_args_are_provided(kwargs)\n        firstresult = self.spec.opts.get(\"firstresult\", False) if self.spec else False\n        # Copy because plugins may register other plugins during iteration (#438).\n>       return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_hooks.py:512: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/pluggy/_manager.py:120: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nfeatures/conftest.py:121: in pytest_bdd_after_scenario\n    context = request.getfixturevalue(\"context\")\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:532: in getfixturevalue\n    fixturedef = self._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1047: in execute\n    fixturedef = request._get_active_fixturedef(argname)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:617: in _get_active_fixturedef\n    fixturedef.execute(request=subrequest)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1071: in execute\n    raise exc.with_traceback(exc_tb)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:1140: in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:891: in call_fixture_func\n    fixture_result = next(generator)\nfeatures/conftest.py:63: in temp_apigee_apps\n    created_apps = apigee_app_mgr.setup_apps_and_product()\nutilities/apigee/ApigeeOnDemandAppManager.py:100: in setup_apps_and_product\n    created_apps.append(self._create_app(product_name_uuid, supplier_name))\nutilities/apigee/ApigeeOnDemandAppManager.py:57: in _create_app\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [502]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 502 Server Error: Bad Gateway for url: https://api.enterprise.apigee.com/v1/organizations/nhsd-nonprod/developers/england.immsfhirapigee@nhs.net/apps\n\n/home/runner/.cache/pypoetry/virtualenvs/e2e-automation-vB3pK5nq-py3.11/lib/python3.11/site-packages/requests/models.py:1026: HTTPError","steps":[],"attachments":[{"uid":"945ceeda94081c79","name":"Step Failed: batch file is created for below data as minimum dataset","source":"945ceeda94081c79.txt","type":"text/plain","size":235}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Immunization Service"},{"name":"suite","value":"Create the immunization event for a patient through batch file"},{"name":"feature","value":"Create the immunization event for a patient through batch file"},{"name":"tag","value":"functional"},{"name":"tag","value":"supplier_name_TPP"},{"name":"tag","value":"vaccine_type_MMR"},{"name":"tag","value":"delete_cleanup_batch"},{"name":"tag","value":"Create_Batch_Feature"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"features.batchTests.Steps"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"2902-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.batchTests.Steps.test_create_batch_steps"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":50,"unknown":0,"total":52},"items":[{"uid":"201ee38cf22ae7d8","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1202/#testresult/201ee38cf22ae7d8","status":"passed","time":{"start":1769688998764,"stop":1769689048831,"duration":50067}},{"uid":"67ad3317481c3a10","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/67ad3317481c3a10","status":"passed","time":{"start":1769686292982,"stop":1769686339536,"duration":46554}},{"uid":"37c1c23244d4f568","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/37c1c23244d4f568","status":"passed","time":{"start":1769685687070,"stop":1769685737304,"duration":50234}},{"uid":"fe98f6a5d87ee5a8","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/172/#testresult/fe98f6a5d87ee5a8","status":"passed","time":{"start":1769684356236,"stop":1769684408182,"duration":51946}},{"uid":"9aef9c3c774568ac","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1198/#testresult/9aef9c3c774568ac","status":"passed","time":{"start":1769615461652,"stop":1769615515689,"duration":54037}},{"uid":"31f0212c9c542c38","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1197/#testresult/31f0212c9c542c38","status":"passed","time":{"start":1769615190604,"stop":1769615242336,"duration":51732}},{"uid":"474b64b385099d69","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1195/#testresult/474b64b385099d69","status":"passed","time":{"start":1769614641409,"stop":1769614691207,"duration":49798}},{"uid":"2c390d6420c4ae54","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1196/#testresult/2c390d6420c4ae54","status":"passed","time":{"start":1769614539764,"stop":1769614590258,"duration":50494}},{"uid":"7e8bc2776ef41c96","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1194/#testresult/7e8bc2776ef41c96","status":"passed","time":{"start":1769614463854,"stop":1769614514239,"duration":50385}},{"uid":"87422787a84c4d82","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1192/#testresult/87422787a84c4d82","status":"passed","time":{"start":1769614392963,"stop":1769614445269,"duration":52306}},{"uid":"13f8f68c4397bda2","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1193/#testresult/13f8f68c4397bda2","status":"passed","time":{"start":1769613789648,"stop":1769613855080,"duration":65432}},{"uid":"60d8ec859f713d2e","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/171/#testresult/60d8ec859f713d2e","status":"passed","time":{"start":1769603004366,"stop":1769603058758,"duration":54392}},{"uid":"8d814178e56fda94","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/171/#testresult/8d814178e56fda94","status":"passed","time":{"start":1769602362116,"stop":1769602408143,"duration":46027}},{"uid":"b00e528c2e0bee98","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/b00e528c2e0bee98","status":"passed","time":{"start":1769601731654,"stop":1769601789263,"duration":57609}},{"uid":"a6d63868bf7c1825","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1189/#testresult/a6d63868bf7c1825","status":"passed","time":{"start":1769601699406,"stop":1769601751134,"duration":51728}},{"uid":"57cd556e3b9ba0b9","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/57cd556e3b9ba0b9","status":"passed","time":{"start":1769601212798,"stop":1769601263597,"duration":50799}},{"uid":"a2eac278feb95d6c","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/170/#testresult/a2eac278feb95d6c","status":"passed","time":{"start":1769600630589,"stop":1769600680823,"duration":50234}},{"uid":"8df6a976163f0651","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1187/#testresult/8df6a976163f0651","status":"passed","time":{"start":1769599998000,"stop":1769600046025,"duration":48025}},{"uid":"faf0dfa3627ff010","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/1188/#testresult/faf0dfa3627ff010","status":"passed","time":{"start":1769599811636,"stop":1769599856876,"duration":45240}},{"uid":"c0a7c9910e100958","reportUrl":"https://NHSDigital.github.io/immunisation-fhir-api/169/#testresult/c0a7c9910e100958","status":"passed","time":{"start":1769599697759,"stop":1769599748868,"duration":51109}}]},"tags":["functional","supplier_name_TPP","vaccine_type_MMR","delete_cleanup_batch","smoke","Create_Batch_Feature"]},"source":"ba5afbd8e5fa0c58.json","parameterValues":[]}